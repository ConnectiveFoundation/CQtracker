<div class="container">
  <div class="row">
    <h1>CQ Tracker App</h1>
    <h2>List of cards</h2>
  </div>
  <div class="row">
    <input class="typeahead" type="text" placeholder="Search for cards by serial number" id="card-search" spellcheck="false" />
  </div>
  <div class="row">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Serial</th>
            <th>Name</th>
            <th>Zip</th>
            <th colspan="3"></th>
          </tr>
        </thead>

        <tbody>
          <% @cards.each do |card| %>
            <tr>
              <td><%= card.serial %></td>
              <td><%= card.name %></td>
              <td><%= card.zip %></td>
              <td><%= link_to 'Show', card %></td>
              <td><%= link_to 'Edit', edit_card_path(card) %></td>
              <td><%= link_to 'Destroy', card, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<br>
  <div class="row">
    <div class="col-xs-12 col-md-8-offset-4">
      <%= link_to 'New Card', new_card_path %>
    </div>
  </div>
</div>
<!-- JQuery -->
<script src="//cdn.jsdelivr.net/jquery/1.11.1/jquery.min.js"></script>
<!-- Typahead.js is used to display the auto-completion menu -->
<script src="//cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.10.4/typeahead.bundle.min.js"></script>
<!-- Algolia -->
<script src="//cdn.jsdelivr.net/algoliasearch/latest/algoliasearch.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    // Replace the following values by your ApplicationID and ApiKey.
    var algolia = new AlgoliaSearch('IKMJ9EN278', 'ce7b1aaedfb0819964c1514d5b143faf');
    // replace YourIndexName by the name of the index you want to query.
    var index = algolia.initIndex('Card');
    function searchCallback(success, content) {
      if (success) {
        for (var i = 0; i < content.hits.length; ++i) {
          console.log(content.hits[i]);
        }
      }
    }

  // perform query "jim"
  index.search("jim", searchCallback);

  // the last optional argument can be used
  // to add search parameters
  index.search("jim", searchCallback, { hitsPerPage: 5, facets: '*' });
    // typeahead.js initialization
    $('#card-search').typeahead({ hint: false }, {
      source: index.ttAdapter({ hitsPerPage: 5 }),
      templates: {
        suggestion: function(hit) {
          // render the hit
          return '<div class="hit">' +
            '<div class="name">' +
              hit._highlightResult.name.value + ' ' +
              '(' + hit._highlightResult.company.value + ')' +
            '</div>' +
          '</div>';
        }
      }
    });
  });
</script>