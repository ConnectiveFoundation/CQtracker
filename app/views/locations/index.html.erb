<br />
<br />
  <div class="row">
    <h1>CQ Card Tracker</h1>
    <h4>See where your card has been and add your location to the list!</h4>
  </div>
  <br />
  <br />
  <form class="form-inline" role="form">
    <div class="form-group">
      <%= form_tag(locations_path, :method => "get", id: "search-form") do %>
        <%= text_field_tag :search, params[:search], placeholder: "Enter Serial Number", :class => "form-control" %>
        <%= submit_tag "Search", :name => nil, :class => "btn btn-primary" %>
      <% end %>
      <%= link_to 'New Location', new_location_path, :class => "btn btn-default" %>
    </div>
  </form> 
  <br />
  <div class="row">
    <div class="col-xs-12 col-md-8-offset2">
      <div id="map" style="width: auto; height: 400px; border-radius: 10px; border: #cccccc solid 1px;">
      </div>
    </div>
  </div>
  <br />
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Serial Number</th>
          <th>Address</th>
          <th>Name</th>
          <th>Latitude</th>
          <th>Longitude</th>
          <th>Date</th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody>
        <% @locations.each do |location| %>
          <tr>
            <td><%= location.serial_number %></td>
            <td><%= location.address %></td>
            <td><%= location.name %></td>
            <td><%= location.latitude %></td>
            <td><%= location.longitude %></td>
            <td><%= location.created_at %></td>
            <td><%= link_to 'Show', location, :class => "btn btn-default" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <script type="text/javascript">
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
      markers = handler.addMarkers(<%= raw @hash.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
    });
  </script>