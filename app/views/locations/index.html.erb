<div class="container">
  <div class="row">
    <h1>All locations</h1>
  </div>
  <br />
  <form class="form-inline" role="form">
    <div class="form-group">
      <%= form_tag(locations_path, :method => "get", id: "search-form") do %>
        <%= text_field_tag :search, params[:search], placeholder: "Search Serial Number", :class => "form-control" %>
        <%= submit_tag "Search", :name => nil, :class => "btn btn-default" %>
      <% end %>
    </div>
  </form>
  <br />
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Serial Number</th>
          <th>Address</th>
          <th>Latitude</th>
          <th>Longitude</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @locations.each do |location| %>
          <tr>
            <td><%= location.serial_number %></td>
            <td><%= location.address %></td>
            <td><%= location.latitude %></td>
            <td><%= location.longitude %></td>
            <td>&nbsp;</td>
            <td><%= link_to 'Show', location %></td>
            <td><%= link_to 'Edit', edit_location_path(location) %></td>
            <td>&nbsp;<!-- <%= link_to 'Destroy', location, method: :delete, data: { confirm: 'Are you sure?' } %> --></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <br />
  <div class="row">
    <div class="pull-right" style="padding-right: 15px;">
      <button type="button" class="btn btn-default"><%= link_to 'New Location', new_location_path %></button>
    </div>
  </div>
  <br />
  <div class="row">
    <div class="col-xs-12 col-md-8-offset2">
      <div id="map" style="width: auto; height: 400px; border-radius: 10px; border: #cccccc solid 1px;"></div>
    </div>
  </div>
</div>
<script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers(<%=raw @hash.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  });
</script>